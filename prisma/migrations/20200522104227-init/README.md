# Migration `20200522104227-init`

This migration has been generated by Kevin Tan <stkevintan@zju.edu.cn> at 5/22/2020, 10:42:27 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
"email" text  NOT NULL ,"id" SERIAL,"name" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Post" (
"authorId" integer   ,"content" text   ,"createdAt" timestamp(3)  NOT NULL ,"draft" boolean  NOT NULL DEFAULT false,"excerpt" text   ,"id" SERIAL,"slug" text  NOT NULL ,"source" text  NOT NULL ,"title" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.name" ON "public"."User"("name")

CREATE UNIQUE INDEX "Post.title" ON "public"."Post"("title")

ALTER TABLE "public"."Post" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200522104227-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,32 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  email String  @unique
+  id    Int     @default(autoincrement()) @id
+  name  String? @unique
+  posts Post[]
+}
+
+model Post {
+  authorId  Int?
+  content   String?
+  excerpt   String?
+  id        Int      @default(autoincrement()) @id
+  draft     Boolean  @default(false)
+  title     String   @unique
+  createdAt DateTime
+  updatedAt DateTime
+  author    User?    @relation(fields: [authorId], references: [id])
+  slug      String
+  source    String
+}
```


